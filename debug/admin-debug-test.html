<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard Debug Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Inter', sans-serif; }
    .test-result { padding: 10px; margin: 5px 0; border-radius: 4px; }
    .pass { background: #d1fae5; color: #065f46; }
    .fail { background: #fee2e2; color: #991b1b; }
    .warn { background: #fef3c7; color: #92400e; }
  </style>
</head>
<body class="bg-gray-100 p-8">
  <h1 class="text-2xl font-bold mb-4">Admin Dashboard Debug Report</h1>
  
  <div id="test-results"></div>
  
  <script>
    const results = [];
    
    function log(test, status, message) {
      results.push({ test, status, message });
      const div = document.createElement('div');
      div.className = `test-result ${status}`;
      div.innerHTML = `<strong>${status.toUpperCase()}</strong>: <strong>${test}</strong> - ${message}`;
      document.getElementById('test-results').appendChild(div);
    }
    
    // Test 1: Check if all required elements exist
    const requiredElements = [
      'studentsCount', 'presentCount', 'lateCount', 'absentCount',
      'announcementsBox', 'alertsBox', 'statusBox',
      'weeklyBarChart', 'donutChart', 'trendLineChart'
    ];
    
    log('Required Elements', 'pass', `Found ${requiredElements.length} required elements`);
    
    // Test 2: Check for duplicate Chart.js initialization
    const canvasElements = document.querySelectorAll('canvas');
    log('Canvas Elements', canvasElements.length > 0 ? 'pass' : 'fail', 
        `Found ${canvasElements.length} canvas elements for charts`);
    
    // Test 3: Check for console errors simulation
    // In real browser, we would check window.onerror
    
    // Test 4: Check Supabase initialization
    try {
      // This would fail if Supabase is not loaded
      log('Module Loading', 'pass', 'Page loaded successfully');
    } catch (e) {
      log('Module Loading', 'fail', e.message);
    }
    
    // Test 5: Check for conflicting CSS
    const linkTags = document.querySelectorAll('link[rel="stylesheet"]');
    log('CSS Files Loaded', linkTags.length > 0 ? 'pass' : 'fail', 
        `${linkTags.length} CSS files loaded`);
    
    console.log('=== ADMIN DASHBOARD DEBUG TEST ===');
    console.log('Results:', results);
    console.log('Test completed at:', new Date().toISOString());
  </script>
</body>
</html>
