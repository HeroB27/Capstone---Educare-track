<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID Management - Educare Track</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="bg-gray-50 theme-admin min-h-screen flex">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 sidebar-transition fixed h-full z-40"></aside>

    <!-- Main Content -->
    <main class="flex-1 ml-64 p-8">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8"></header>

        <!-- ID Management Section -->
        <section id="idsSection" class="section-content">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">Student ID Management</h3>
                    <p class="text-sm text-gray-500">Search students to generate or re-print ID cards</p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-8">
                <div class="flex space-x-4">
                    <div class="relative flex-1">
                        <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400">
                            <i data-lucide="search" class="w-5 h-5"></i>
                        </span>
                        <input type="text" id="studentSearch" placeholder="Search by name or LRN..." 
                            class="pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-violet-500 focus:border-violet-500 outline-none w-full">
                    </div>
                </div>
            </div>

            <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Search results will appear here -->
                <div class="col-span-full py-20 text-center text-gray-400">
                    <i data-lucide="user-search" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
                    <p>Enter a student name or LRN to find records</p>
                </div>
            </div>
        </section>

        <!-- Modal: ID Card Preview -->
        <div id="idPreviewModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-xl font-bold text-gray-900">ID Card Preview</h3>
                    <button class="close-preview-modal text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <div class="flex flex-col items-center">
                    <div id="idCardPreview" class="bg-white border border-gray-200 shadow-xl flex mb-8" style="width: 500px; height: 300px;">
                        <!-- Front -->
                        <div class="w-1/2 p-6 border-r border-dashed border-gray-300 flex flex-col items-center text-center">
                            <p class="text-[12px] font-bold text-violet-700 uppercase tracking-tighter">Educare Colleges Inc</p>
                            <p class="text-[8px] text-gray-500">Purok 4 Irisan Baguio City</p>
                            <div id="previewPhotoContainer" class="w-28 h-28 bg-gray-100 rounded-full my-4 flex items-center justify-center border-2 border-violet-100 overflow-hidden">
                                <i data-lucide="user" class="text-gray-300 w-16 h-16"></i>
                            </div>
                            <p id="previewName" class="text-base font-bold text-gray-900 leading-tight"></p>
                            <p id="previewAddress" class="text-[8px] text-gray-500 mt-1"></p>
                            <p id="previewClass" class="text-[12px] font-bold text-violet-600 mt-2"></p>
                        </div>
                        <!-- Back -->
                        <div class="w-1/2 p-6 flex flex-col items-center justify-between bg-gray-50/50">
                            <div id="previewQR" class="w-28 h-28 bg-white p-2 rounded-lg shadow-sm border border-gray-100"></div>
                            <div class="text-center">
                                <p id="previewID" class="text-[12px] font-mono text-gray-900 font-bold tracking-widest"></p>
                                <p id="previewParent" class="text-[10px] text-gray-600 mt-2 font-medium"></p>
                                <p id="previewPhone" class="text-[10px] text-gray-500"></p>
                            </div>
                            <p class="text-[7px] text-gray-400 mt-4 italic font-bold">If this ID is lost, please return to Educare Colleges Inc.</p>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4 w-full">
                        <button id="reissueQRBtn" class="flex-1 px-6 py-3 border border-amber-200 bg-amber-50 text-amber-700 rounded-xl font-bold hover:bg-amber-100 transition-all flex items-center justify-center space-x-2">
                            <i data-lucide="refresh-cw" class="w-5 h-5"></i>
                            <span>Reissue QR</span>
                        </button>
                        <button id="printIDBtn" class="flex-1 bg-violet-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-violet-700 transition-all flex items-center justify-center space-x-2 shadow-lg shadow-violet-200">
                            <i data-lucide="printer" class="w-5 h-5"></i>
                            <span>Print ID Card</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module" src="../js/admin-ids.js"></script>
</body>
</html>
